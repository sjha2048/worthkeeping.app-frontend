---

---

<div class="w-full overflow-x-auto">
  <div class="min-w-[700px] p-4">
    <svg viewBox="0 0 800 600" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg">
      <!-- Background -->
      <defs>
        <linearGradient id="browserGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" class="[stop-color:var(--color-primary)] [stop-opacity:0.1]" />
          <stop offset="100%" class="[stop-color:var(--color-accent)] [stop-opacity:0.05]" />
        </linearGradient>
        <linearGradient id="arrowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" class="[stop-color:var(--color-primary)]" />
          <stop offset="100%" class="[stop-color:var(--color-accent)]" />
        </linearGradient>
      </defs>

      <!-- Browser Container -->
      <rect x="40" y="30" width="720" height="420" rx="12" fill="url(#browserGradient)" class="stroke-border dark:stroke-border-dark" stroke-width="2"/>

      <!-- Browser Label -->
      <text x="60" y="60" class="fill-text dark:fill-text-dark text-sm font-semibold" font-size="14" font-weight="600">Browser</text>

      <!-- Top Row: Extension Components -->

      <!-- Overlay (Capture) -->
      <g transform="translate(80, 90)">
        <rect width="140" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-border dark:stroke-border-dark" stroke-width="1.5"/>
        <rect width="140" height="24" rx="8" class="fill-primary/10" />
        <text x="70" y="16" text-anchor="middle" class="fill-primary text-xs font-medium" font-size="11" font-weight="500">Overlay</text>
        <text x="70" y="50" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="10">(Capture)</text>
        <circle cx="70" cy="65" r="3" class="fill-accent"/>
      </g>

      <!-- Side Panel (UI) -->
      <g transform="translate(260, 90)">
        <rect width="140" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-border dark:stroke-border-dark" stroke-width="1.5"/>
        <rect width="140" height="24" rx="8" class="fill-primary/10" />
        <text x="70" y="16" text-anchor="middle" class="fill-primary text-xs font-medium" font-size="11" font-weight="500">Side Panel</text>
        <text x="70" y="50" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="10">(UI)</text>
        <circle cx="70" cy="65" r="3" class="fill-accent"/>
      </g>

      <!-- Background Worker -->
      <g transform="translate(440, 90)">
        <rect width="140" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-border dark:stroke-border-dark" stroke-width="1.5"/>
        <rect width="140" height="24" rx="8" class="fill-primary/10" />
        <text x="70" y="16" text-anchor="middle" class="fill-primary text-xs font-medium" font-size="11" font-weight="500">Background</text>
        <text x="70" y="50" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="10">Worker</text>
        <circle cx="70" cy="65" r="3" class="fill-accent"/>
      </g>

      <!-- Connecting Lines from Top to IndexedDB -->
      <path d="M150 170 L150 200 L400 200 L400 230" class="stroke-border dark:stroke-border-dark" stroke-width="2" fill="none" stroke-dasharray="4"/>
      <path d="M330 170 L330 200 L400 200" class="stroke-border dark:stroke-border-dark" stroke-width="2" fill="none" stroke-dasharray="4"/>
      <path d="M510 170 L510 200 L400 200" class="stroke-border dark:stroke-border-dark" stroke-width="2" fill="none" stroke-dasharray="4"/>

      <!-- IndexedDB -->
      <g transform="translate(300, 230)">
        <rect width="200" height="70" rx="8" class="fill-white dark:fill-surface-dark stroke-primary" stroke-width="2"/>
        <rect width="200" height="26" rx="8" class="fill-primary/20" />
        <text x="100" y="18" text-anchor="middle" class="fill-primary text-xs font-semibold" font-size="12" font-weight="600">IndexedDB</text>
        <text x="100" y="48" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="10">(Dexie.js)</text>

        <!-- Data stays here indicator -->
        <g transform="translate(210, 20)">
          <rect x="-5" y="-10" width="90" height="20" rx="4" class="fill-accent/20"/>
          <text x="40" y="3" text-anchor="middle" class="fill-accent" font-size="8" font-weight="500">‚Üê All data stays here</text>
        </g>
      </g>

      <!-- Connecting Lines from IndexedDB to bottom -->
      <path d="M350 300 L350 330 L200 330 L200 360" class="stroke-border dark:stroke-border-dark" stroke-width="2" fill="none" stroke-dasharray="4"/>
      <path d="M450 300 L450 330 L560 330 L560 360" class="stroke-border dark:stroke-border-dark" stroke-width="2" fill="none" stroke-dasharray="4"/>

      <!-- Transformers.js -->
      <g transform="translate(80, 360)">
        <rect width="180" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-border dark:stroke-border-dark" stroke-width="1.5"/>
        <rect width="180" height="26" rx="8" class="fill-accent/10" />
        <text x="90" y="18" text-anchor="middle" class="fill-accent text-xs font-semibold" font-size="11" font-weight="600">Transformers.js</text>
        <text x="90" y="48" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="9">(On-Device Embeddings)</text>
        <text x="90" y="64" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="8">MiniLM-L6-v2</text>
      </g>

      <!-- Vercel AI SDK -->
      <g transform="translate(480, 360)">
        <rect width="180" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-border dark:stroke-border-dark" stroke-width="1.5"/>
        <rect width="180" height="26" rx="8" class="fill-primary/10" />
        <text x="90" y="18" text-anchor="middle" class="fill-primary text-xs font-semibold" font-size="11" font-weight="600">Vercel AI SDK</text>
        <text x="90" y="48" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="9">(User API Key)</text>
        <circle cx="90" cy="65" r="3" class="fill-primary"/>
      </g>

      <!-- Arrow from Vercel AI SDK to outside -->
      <path d="M570 440 L570 480" class="stroke-primary" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

      <!-- "Only outbound call" label -->
      <text x="590" y="470" class="fill-text-muted dark:fill-text-muted-dark" font-size="9">Only outbound call</text>

      <!-- Browser boundary line -->
      <line x1="40" y1="450" x2="760" y2="450" class="stroke-border dark:stroke-border-dark" stroke-width="2" stroke-dasharray="8,4"/>

      <!-- External: AI Provider API -->
      <g transform="translate(430, 490)">
        <rect width="200" height="80" rx="8" class="fill-white dark:fill-surface-dark stroke-accent" stroke-width="2"/>
        <rect width="200" height="26" rx="8" class="fill-accent/20" />
        <text x="100" y="18" text-anchor="middle" class="fill-accent text-xs font-semibold" font-size="12" font-weight="600">AI Provider API</text>
        <text x="100" y="46" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="9">(OpenAI / Claude /</text>
        <text x="100" y="58" text-anchor="middle" class="fill-text-muted dark:fill-text-muted-dark" font-size="9">Gemini / Ollama)</text>
      </g>

      <!-- Arrow marker definition -->
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" class="fill-primary" />
        </marker>
      </defs>

      <!-- Legend -->
      <g transform="translate(620, 90)">
        <text x="0" y="0" class="fill-text dark:fill-text-dark text-xs font-medium" font-size="10" font-weight="500">Legend</text>
        <g transform="translate(0, 15)">
          <circle cx="6" cy="6" r="4" class="fill-accent"/>
          <text x="16" y="10" class="fill-text-muted dark:fill-text-muted-dark" font-size="8">Data flow</text>
        </g>
        <g transform="translate(0, 35)">
          <line x1="0" y1="6" x2="12" y2="6" class="stroke-border dark:stroke-border-dark" stroke-width="2" stroke-dasharray="3"/>
          <text x="16" y="10" class="fill-text-muted dark:fill-text-muted-dark" font-size="8">Internal connection</text>
        </g>
        <g transform="translate(0, 55)">
          <line x1="0" y1="6" x2="12" y2="6" class="stroke-primary" stroke-width="2"/>
          <text x="16" y="10" class="fill-text-muted dark:fill-text-muted-dark" font-size="8">External API call</text>
        </g>
      </g>
    </svg>
  </div>
</div>
